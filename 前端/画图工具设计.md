---
tags: [业务设计]
intro: 画图工具简单设计
type: [思考]
---
# 业务分析
### 绘画区
- 设计思路 : 在固有背景上做操作 , canvas 本体 , 事件处理区域
- 要处理的事情:
	1. 图层层级
		- 当前操作图层 ⬆️
		- 当前图层  (单独图层 , 只移动处理该图层 , 增强性能优化)
		- 当前图层 ⬇️
	2. 图层识别
		- 识别事件发生区域 , 是操作哪一个图层.
	3. 工具对应现象 例如 画笔是在画画
### 功能区
- 设计思路: 低层依赖 -> 工具代码 -> 工具
	- 色彩识别 [ 吸色器 , 画笔, 锐化, 仿章 ]
	- 内容操作 ( 移动,旋转,变形) [ 图片 , 形状模块 , 选框 , 裁切 ]
	- 历史记录 [ 污点修复 ]
### 图层区
- 设计思路: 单图层 -> 单图片 -> 通过工具创建 
- 功能点: 针对单一图层做处理 -> 图片处理 -> 色彩分析识别.
### 历史区 ( 编辑资料 )
- 设计思路:编辑资料展示区
- 功能点:编辑资料 -> 编译器 -> 重绘.
# 框架设计
## 跨平台分层处理
- canvas 操作层 -> 形成接口 -> 上层封装基本能力点 -> 工具调用
- window 事件 -> 形成接口 -> 上层封装
## 业务设计
- 核心思路: 以 绘画区 , 图层区 ,历史区 , 3块作为操作 . 增加工具
- 图层区和历史区功能简单 -> 提供接口能力
	- 图层区提供 : 
		- 添加图层 , 删除图层 , 图层色彩变换(工具模块只是放在图层区操作) , 获取当前图层
		- 使用:
			- 图层其实是对于大面积图象的管理. 所以在创建的时候可以进行一次处理.
	- 历史区提供 : 
		- 添加历史 ,删除历史 , 历史重绘
		- 使用: 
			- 记录 用户操作使用 ,所以可以定义成 修饰器 , 给 每个工具的需要步骤进行装配
- 绘画区提供接口 , 且是被接管状态 , 非简单接口
	- 状态切换 : 
		- 比如添加了一个图片 -> 切换到图片模式 -> 由图片工具接管.
		- 调用时机:
			- 点击工具切换对应模式
			- 点击对应图层 -> 图层操作
	- 图层表现 : 确定出 用户操作的哪一个图层, 通过图层模块进行处理
- 工具: 设计终点
	- 扩展方向: 插件模式 ,每一个工具都是一个新的对象.
	- 对象提供:
		- 基本信息.
		- 接管图层操作.
		- 额外UI处理
## 模块区分
- cnavas ,事件封装 sdk
- 历史模块
- 图层模块
- 绘画区模块
- 工具模块 : 插件模式

## 例
![[Pasted image 20231008201813.png]]